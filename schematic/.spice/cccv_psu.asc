Version 4
SHEET 1 3780 1724
WIRE 288 -96 128 -96
WIRE -400 -32 -608 -32
WIRE 352 -32 288 -32
WIRE 352 -16 352 -32
WIRE 368 -16 352 -16
WIRE 480 -16 448 -16
WIRE 592 -16 560 -16
WIRE 1040 -16 928 -16
WIRE 1152 -16 1040 -16
WIRE 1360 -16 1152 -16
WIRE 1568 -16 1360 -16
WIRE -880 0 -880 -32
WIRE 288 0 288 -32
WIRE -400 16 -400 -32
WIRE -400 16 -432 16
WIRE -368 16 -400 16
WIRE 560 16 560 -16
WIRE 800 16 800 -16
WIRE 1040 16 1040 -16
WIRE -496 48 -496 16
WIRE -496 48 -528 48
WIRE -304 48 -304 16
WIRE -240 48 -304 48
WIRE -144 48 -240 48
WIRE -528 64 -528 48
WIRE -80 64 -80 48
WIRE -64 64 -80 64
WIRE 976 64 928 64
WIRE 1152 64 1152 -16
WIRE 1360 64 1360 -16
WIRE 1568 64 1568 -16
WIRE 1888 64 1872 64
WIRE -496 80 -496 48
WIRE -400 80 -432 80
WIRE -368 80 -400 80
WIRE -304 80 -304 48
WIRE 288 80 288 64
WIRE 480 80 480 64
WIRE 1888 80 1888 64
WIRE 1968 96 1936 96
WIRE 800 112 768 112
WIRE 1056 112 1040 112
WIRE 1088 112 1056 112
WIRE -880 128 -880 80
WIRE -400 128 -400 80
WIRE -400 128 -880 128
WIRE -240 144 -240 48
WIRE 2080 144 1936 144
WIRE 2080 160 2080 144
WIRE 1056 176 1056 112
WIRE 1152 176 1152 160
WIRE 1360 176 1360 160
WIRE 1568 176 1568 160
WIRE 96 192 -144 192
WIRE 192 192 96 192
WIRE 272 208 256 208
WIRE 304 208 272 208
WIRE 400 208 384 208
WIRE 432 208 400 208
WIRE 544 208 512 208
WIRE 592 208 544 208
WIRE 656 208 592 208
WIRE 1888 208 1888 160
WIRE -240 224 -240 208
WIRE 192 224 160 224
WIRE 400 224 400 208
WIRE 768 224 720 224
WIRE 800 224 768 224
WIRE 928 224 928 64
WIRE 928 224 880 224
WIRE -16 240 -96 240
WIRE 544 240 544 208
WIRE 656 240 624 240
WIRE -144 256 -144 192
WIRE 928 256 928 224
WIRE 944 256 928 256
WIRE 1056 256 1056 176
WIRE 1056 256 1024 256
WIRE 1152 256 1136 256
WIRE 1360 256 1152 256
WIRE 1568 256 1360 256
WIRE 2080 256 2080 240
WIRE 688 272 688 256
WIRE -448 288 -544 288
WIRE 768 288 768 224
WIRE 272 304 272 208
WIRE 400 304 400 288
WIRE 1888 320 1888 288
WIRE -720 352 -784 352
WIRE -544 352 -608 352
WIRE -448 352 -448 288
WIRE -448 352 -464 352
WIRE -352 352 -448 352
WIRE 544 352 544 304
WIRE 544 352 528 352
WIRE -448 368 -448 352
WIRE -144 368 -144 336
WIRE -144 368 -208 368
WIRE -96 368 -96 240
WIRE -96 368 -144 368
WIRE -80 368 -96 368
WIRE -208 384 -208 368
WIRE -16 384 -16 304
WIRE 0 384 -16 384
WIRE 96 384 96 192
WIRE 96 384 80 384
WIRE -784 400 -784 352
WIRE -608 400 -608 352
WIRE -80 400 -96 400
WIRE 96 400 96 384
WIRE 160 400 160 224
WIRE 272 400 272 368
WIRE 272 400 160 400
WIRE 592 400 592 208
WIRE 592 400 272 400
WIRE -352 416 -352 352
WIRE 2624 432 2528 432
WIRE 2768 448 2688 448
WIRE 2896 448 2768 448
WIRE 3024 448 2976 448
WIRE 3120 448 3024 448
WIRE 3216 448 3200 448
WIRE 624 464 624 240
WIRE 688 464 624 464
WIRE 768 464 768 352
WIRE 768 464 688 464
WIRE 928 464 928 400
WIRE 928 464 768 464
WIRE 1152 464 1152 256
WIRE 1152 464 928 464
WIRE 1232 464 1152 464
WIRE 2624 464 2592 464
WIRE -448 480 -448 448
WIRE -208 480 -208 464
WIRE 688 480 688 464
WIRE 1152 496 1152 464
WIRE -784 528 -784 480
WIRE -608 528 -608 480
WIRE 1968 528 1936 528
WIRE 2592 528 2592 464
WIRE 2768 528 2768 448
WIRE 2768 528 2592 528
WIRE 1840 560 1792 560
WIRE 1936 560 1936 528
WIRE 1936 560 1872 560
WIRE 2032 560 1936 560
WIRE -448 576 -448 544
WIRE -352 576 -352 480
WIRE 688 576 688 560
WIRE 832 576 832 560
WIRE 928 576 928 560
WIRE 1040 576 1040 560
WIRE 1152 576 1152 560
WIRE 1840 576 1840 560
WIRE 2032 576 2032 560
WIRE 3024 592 3024 448
WIRE 3072 592 3024 592
WIRE 3216 608 3216 448
WIRE 3216 608 3136 608
WIRE 3408 608 3216 608
WIRE 880 624 880 592
WIRE 1504 624 1504 592
WIRE 3072 624 3024 624
WIRE 3552 624 3472 624
WIRE 3616 624 3552 624
WIRE 3408 640 3360 640
WIRE 2032 672 2032 656
WIRE 2768 672 2592 672
WIRE 3552 672 3552 624
WIRE 672 720 656 720
WIRE 1504 720 1504 704
WIRE 1520 720 1504 720
WIRE 1840 720 1792 720
WIRE 1936 720 1872 720
WIRE 2032 720 1936 720
WIRE -624 736 -688 736
WIRE -448 736 -512 736
WIRE 656 736 656 720
WIRE 880 736 880 704
WIRE 896 736 880 736
WIRE 1504 736 1504 720
WIRE 1840 736 1840 720
WIRE 2032 736 2032 720
WIRE 2592 736 2592 672
WIRE 2624 736 2592 736
WIRE 2768 752 2768 672
WIRE 2768 752 2688 752
WIRE 2880 752 2768 752
WIRE 3024 752 3024 624
WIRE 3024 752 2960 752
WIRE 3104 752 3024 752
WIRE 3280 752 3184 752
WIRE 2624 768 2528 768
WIRE 3360 768 3360 640
WIRE 3552 768 3552 752
WIRE 3552 768 3360 768
WIRE 3280 784 3280 752
WIRE 112 800 -64 800
WIRE -688 816 -688 752
WIRE -512 816 -512 752
WIRE 352 816 176 816
WIRE 1504 816 1504 800
WIRE -48 832 -64 832
WIRE 64 832 32 832
WIRE 112 832 64 832
WIRE 656 832 656 816
WIRE 64 848 64 832
WIRE 352 864 352 816
WIRE 1936 864 1936 720
WIRE 1952 864 1936 864
WIRE 3552 864 3552 848
WIRE 656 912 656 896
WIRE -688 944 -688 896
WIRE -512 944 -512 896
WIRE 64 944 64 928
WIRE 1088 944 912 944
WIRE 2832 944 2720 944
WIRE 1184 960 1152 960
WIRE 1248 960 1248 912
WIRE 1248 960 1184 960
WIRE 352 976 352 944
WIRE 1056 976 912 976
WIRE 1088 976 1056 976
WIRE 2720 976 2720 944
WIRE 1184 1040 1184 960
WIRE 352 1056 352 1040
WIRE 656 1056 656 1008
WIRE 2720 1072 2720 1056
WIRE 1056 1120 1056 976
WIRE 1184 1120 1184 1104
WIRE 1184 1120 1056 1120
FLAG 688 576 0
FLAG 1152 576 0
FLAG -544 288 Vcc
FLAG 224 176 0
FLAG 656 1056 0
FLAG 2032 672 0
FLAG 2032 816 0
FLAG 928 -16 Vcc
FLAG 144 784 0
FLAG 912 976 Curr_sense
FLAG 1056 176 base
FLAG 1296 112 base
FLAG 1504 112 base
FLAG -528 64 0
FLAG -64 64 Vcc
FLAG 592 -16 Vsteady
FLAG 688 272 Vsteady
FLAG 224 240 Vsteady
FLAG 1120 992 Vsteady
FLAG 144 848 Vsteady
FLAG 3104 576 Vsteady
FLAG -240 224 0
FLAG -720 352 Vsteady
FLAG -448 736 Vcc
FLAG -512 944 0
FLAG -624 736 Vsteady
FLAG -688 944 0
FLAG 1504 816 0
FLAG 1504 592 Vsteady
FLAG 1840 816 0
FLAG 1840 656 0
FLAG 1520 720 Vzener
FLAG 1712 720 Vzener
FLAG 1712 560 Vzener
FLAG 1952 864 CurrAdj
FLAG 912 944 CurrAdj
FLAG 1968 528 VoltAdj
FLAG -96 400 VoltAdj
FLAG -400 -32 Vtransformer
FLAG 288 80 0
FLAG 128 -96 Vtransformer
FLAG 480 80 0
FLAG 672 720 Vcc
FLAG 352 1056 0
FLAG 560 80 0
FLAG -64 800 Curr_sense
FLAG 96 464 0
FLAG -48 352 Vsteady
FLAG -48 416 0
FLAG -208 480 0
FLAG 64 944 0
FLAG -64 832 CurrAdj
FLAG 2720 1072 0
FLAG 2832 944 Vneg
FLAG 1232 464 Vout
IOPIN 1232 464 Out
FLAG 1872 64 Vout
IOPIN 1872 64 In
FLAG 2080 256 0
FLAG 1888 320 0
FLAG 1968 96 0
FLAG 1232 352 Vcurr
FLAG 2528 432 Vout
IOPIN 2528 432 In
FLAG 2528 768 Vcurr
FLAG 2656 480 Vsteady
FLAG 2656 720 Vsteady
FLAG 3280 784 0
FLAG 2656 784 Vneg
FLAG 2656 416 Vneg
FLAG 3104 640 Vneg
FLAG 3440 656 Vsteady
FLAG 3440 592 Vneg
FLAG 3552 864 0
FLAG 3616 624 Curr_sense
FLAG 1040 576 0
FLAG 928 576 0
FLAG 832 576 0
FLAG -448 576 0
FLAG -352 576 0
FLAG 688 112 0
FLAG 400 304 0
FLAG 528 352 Pull_Down
FLAG 1248 912 Pull_Down
FLAG 1120 928 Vneg
FLAG 688 192 Vneg
FLAG 880 592 0
FLAG 896 736 GND_low
FLAG -608 528 GND_low
FLAG -784 528 GND_low
SYMBOL res 896 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 180R
SYMBOL voltage -608 384 R0
WINDOW 123 0 0 Left 2
WINDOW 39 -32 124 Left 2
SYMATTR SpiceLine Rser=3
SYMATTR InstName V2
SYMATTR Value 25.2
SYMBOL res 672 464 R0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL cap 1136 496 R0
SYMATTR InstName C1
SYMATTR Value 10µF
SYMATTR SpiceLine Rser=0.1
SYMBOL res 1040 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 8k
SYMBOL res 400 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 1k
SYMBOL res -128 352 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R10
SYMATTR Value 50k
SYMBOL res -192 368 M0
SYMATTR InstName R11
SYMATTR Value 50k
SYMBOL res 672 832 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL LED 640 832 R0
SYMATTR InstName D1
SYMBOL voltage 2032 560 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -270 92 Left 2
SYMATTR Value 5
SYMATTR InstName V3
SYMBOL voltage 2032 720 M0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
WINDOW 3 -299 123 Left 2
SYMATTR Value 0.5
SYMATTR InstName V4
SYMBOL res 80 944 R180
WINDOW 0 43 36 Left 2
WINDOW 3 36 14 Left 2
SYMATTR InstName R18
SYMATTR Value 470k
SYMBOL npn 976 16 R0
SYMATTR InstName Q2
SYMBOL npn 1088 64 R0
SYMATTR InstName Q3
SYMBOL res 1136 160 R0
SYMATTR InstName R2
SYMATTR Value 0.1
SYMATTR SpiceLine tol=1%
SYMBOL npn 1296 64 R0
SYMATTR InstName Q4
SYMBOL res 1344 160 R0
SYMATTR InstName R3
SYMATTR Value 0.1
SYMATTR SpiceLine tol=1%
SYMBOL npn 1504 64 R0
SYMATTR InstName Q5
SYMBOL res 1552 160 R0
SYMATTR InstName R12
SYMATTR Value 0.1
SYMATTR SpiceLine tol=1%
SYMBOL voltage -880 -16 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value SINE(0 25.2 50)
SYMBOL res -704 -16 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R13
SYMATTR Value 3
SYMBOL diode -496 32 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMBOL diode -368 32 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 -5 34 VBottom 2
SYMATTR InstName D3
SYMBOL diode -368 64 M90
WINDOW 0 67 30 VBottom 2
WINDOW 3 -27 17 VTop 2
SYMATTR InstName D4
SYMBOL diode -496 64 M90
WINDOW 0 60 29 VBottom 2
WINDOW 3 -32 16 VTop 2
SYMATTR InstName D5
SYMBOL cap -256 144 R0
SYMATTR InstName C4
SYMATTR Value 10m
SYMATTR SpiceLine Rser=0.1
SYMBOL res -64 848 R270
WINDOW 0 -31 23 VTop 2
WINDOW 3 -3 76 VBottom 2
SYMATTR InstName R14
SYMATTR Value 1k
SYMBOL voltage -784 384 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V5
SYMATTR Value 14.3
SYMBOL zener 1520 800 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D7
SYMATTR Value 1N750
SYMBOL res 1488 608 R0
SYMATTR InstName R15
SYMATTR Value 5.6k
SYMBOL res 1696 736 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R16
SYMATTR Value 5k
SYMBOL res 1824 720 R0
SYMATTR InstName R23
SYMATTR Value 5k
SYMBOL res 1696 576 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R24
SYMATTR Value 5k
SYMBOL res 1824 560 R0
SYMATTR InstName R25
SYMATTR Value 5k
SYMBOL diode 272 -96 R0
WINDOW 0 5 -19 Left 2
WINDOW 3 -23 46 Left 2
SYMATTR InstName D8
SYMBOL cap 272 0 R0
SYMATTR InstName C6
SYMATTR Value 10m
SYMATTR SpiceLine Rser=0.1
SYMBOL res 464 -32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R27
SYMATTR Value 1m
SYMBOL res 464 -32 R0
SYMATTR InstName R28
SYMATTR Value 1k
SYMBOL Opamps\\opamp2 688 288 M180
SYMATTR InstName U4
SYMATTR Value LM358
SYMBOL Opamps\\opamp2 224 272 M180
SYMATTR InstName U5
SYMATTR Value LM358
SYMBOL Opamps\\opamp2 1120 1024 M180
WINDOW 3 19 126 Left 2
SYMATTR Value LM358
SYMATTR InstName U1
SYMBOL Opamps\\opamp2 144 880 M180
SYMATTR InstName U2
SYMATTR Value LM358
SYMBOL Opamps\\opamp2 3104 544 R0
SYMATTR InstName U3
SYMATTR Value LM358
SYMBOL npn 592 912 R0
SYMATTR InstName Q6
SYMBOL res 368 960 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R29
SYMATTR Value 1k
SYMBOL cap 336 976 R0
SYMATTR InstName C7
SYMATTR Value 100n
SYMBOL cap 544 16 R0
SYMATTR InstName C10
SYMATTR Value 100p
SYMATTR SpiceLine Rser=0.01
SYMBOL Opamps\\opamp2 -48 320 R0
WINDOW 3 -48 130 Left 2
WINDOW 0 -49 109 Left 2
SYMATTR Value LM358
SYMATTR InstName U6
SYMBOL res -16 400 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -5 51 VBottom 2
SYMATTR InstName R17
SYMATTR Value 1k
SYMBOL cap 80 400 R0
SYMATTR InstName C8
SYMATTR Value 10µ
SYMBOL cap 752 288 R0
SYMATTR InstName C5
SYMATTR Value 100p
SYMBOL cap 256 304 R0
WINDOW 3 -55 65 Left 2
SYMATTR Value 1000p
SYMATTR InstName C11
SYMBOL cap -32 304 M180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C12
SYMATTR Value 1000pF
SYMBOL cap 1168 1104 M180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C13
SYMATTR Value 100p
SYMBOL voltage 2720 960 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V6
SYMATTR Value -5
SYMBOL res 1872 192 R0
SYMATTR InstName R32
SYMATTR Value 1
SYMBOL sw 1888 64 M0
WINDOW 0 38 39 Left 2
SYMATTR InstName S1
SYMATTR Value SW1
SYMBOL voltage 2080 144 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V7
SYMATTR Value PULSE(0 5 25ms 1n 1n 1m 0 1)
SYMBOL Opamps\\opamp2 2656 512 M180
SYMATTR InstName U7
SYMATTR Value LM358
SYMBOL Opamps\\opamp2 2656 688 R0
SYMATTR InstName U8
SYMATTR Value LM358
SYMBOL res 2880 464 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R19
SYMATTR Value 90k
SYMBOL res 3104 464 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R20
SYMATTR Value 10k
SYMBOL res 2976 736 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 90k
SYMBOL res 3200 736 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R30
SYMATTR Value 10k
SYMBOL npn 992 304 M0
SYMATTR InstName Q1
SYMATTR Value 2N2222
SYMBOL Opamps\\opamp2 3440 688 M180
SYMATTR InstName U9
SYMATTR Value LM358
SYMBOL res 3536 752 R0
SYMATTR InstName R31
SYMATTR Value 1k
SYMBOL res 3536 656 R0
SYMATTR InstName R33
SYMATTR Value 44.5k
SYMBOL cap 1024 496 R0
SYMATTR InstName C14
SYMATTR Value 100µF
SYMATTR SpiceLine Rser=0.1
SYMBOL cap 912 496 R0
SYMATTR InstName C15
SYMATTR Value 100µF
SYMATTR SpiceLine Rser=0.1
SYMBOL cap 816 496 R0
SYMATTR InstName C16
SYMATTR Value 100n
SYMATTR SpiceLine Rser=0.05
SYMBOL ind -560 368 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 1µH
SYMBOL zener -432 544 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -24 3 Left 2
SYMATTR InstName D12
SYMATTR Value BZX384B33
SYMBOL res -464 352 R0
SYMATTR InstName R35
SYMATTR Value 0.1
SYMBOL cap -368 416 R0
SYMATTR InstName C17
SYMATTR Value 10mF
SYMBOL pnp 864 112 R180
WINDOW 0 6 106 Left 2
WINDOW 3 76 88 Left 2
SYMATTR InstName Q7
SYMBOL res 784 96 R90
WINDOW 0 3 62 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R37
SYMATTR Value 5k
SYMBOL res 1152 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R36
SYMATTR Value 200
SYMBOL res 528 192 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R38
SYMATTR Value 1k
SYMBOL diode 528 240 R0
SYMATTR InstName D13
SYMBOL cap 384 224 R0
SYMATTR InstName C2
SYMATTR Value 100n
SYMBOL res 864 608 R0
SYMATTR InstName R6
SYMATTR Value 0.2
TEXT -1176 544 Left 2 ;.STEP param RL 0.5k 1k 0.5k\n.STEP param Vadj 0 5 1\n.STEP param Cur 0 10 1\n.STEP param RL 1 20\n \n.op\n.STEP param I_load 0 0.5
TEXT -1176 480 Left 2 !.inc LM358.101
TEXT -1168 800 Left 2 ;.op\n.STEP param Vadj 0 7.5 2
TEXT -1176 424 Left 2 ;.OPTIONS plotwinsize=0
TEXT -1168 272 Left 2 ;.op\n.STEP param RL 1 20
TEXT -1168 384 Left 2 ;.tran 100us
TEXT -1160 240 Left 2 !.tran 40ms
TEXT -520 1008 Left 2 ;SINE(15 1 50)
TEXT -856 1008 Left 2 ;SINE(14.3 0.1 50)
TEXT 1352 824 Left 2 ;2.4V
TEXT 2104 272 Left 2 !.model SW1 SW(Ron=0.0001 Roff=10Meg Vt=1.1 Vh=0.1)
TEXT 2072 680 Left 2 ;SINE(4 4 5 10ms 0 90 5)
TEXT 2072 872 Left 2 ;PULSE(3 -0.1 0 0 8000ms)
TEXT 2072 624 Left 2 ;PULSE(0 5 1ms 100ms 100ms 5ms 250ms 1)
TEXT 1928 912 Left 2 ;PULSE(1 0.5 10ms 200ms 200m 20m 500m 1)
