Version 4
SHEET 1 3364 1108
WIRE 1984 224 1968 224
WIRE 2064 224 2048 224
WIRE 2176 224 2160 224
WIRE 2048 256 2048 224
WIRE 2416 256 2384 256
WIRE 2528 256 2496 256
WIRE 2704 256 2688 256
WIRE 2816 256 2784 256
WIRE 2864 256 2816 256
WIRE 2976 256 2944 256
WIRE 3024 256 2976 256
WIRE 1200 272 1136 272
WIRE 2816 272 2816 256
WIRE 2976 272 2976 256
WIRE 192 288 -48 288
WIRE 416 288 192 288
WIRE 672 288 480 288
WIRE 784 288 672 288
WIRE 800 288 784 288
WIRE 1728 288 1664 288
WIRE 1824 304 1792 304
WIRE 1856 304 1824 304
WIRE 1984 304 1984 224
WIRE 1984 304 1936 304
WIRE 2160 304 2160 224
WIRE 1200 320 1200 272
WIRE 1696 320 1664 320
WIRE 1728 320 1696 320
WIRE 96 336 80 336
WIRE 192 336 192 288
WIRE 192 336 160 336
WIRE 224 336 192 336
WIRE 304 336 288 336
WIRE 1984 352 1984 304
WIRE 2080 352 2048 352
WIRE 2096 352 2080 352
WIRE 2816 352 2816 336
WIRE 2976 352 2976 336
WIRE 672 368 672 288
WIRE 784 368 784 288
WIRE -48 384 -48 288
WIRE 80 384 80 336
WIRE 80 384 48 384
WIRE 304 384 304 336
WIRE 368 384 304 384
WIRE 448 384 368 384
WIRE 528 384 448 384
WIRE 48 400 48 384
WIRE 1824 400 1824 304
WIRE 1200 416 1200 400
WIRE 1296 416 1200 416
WIRE 368 432 368 384
WIRE 448 432 448 384
WIRE 2416 432 2384 432
WIRE 2528 432 2496 432
WIRE 2704 432 2688 432
WIRE 2816 432 2784 432
WIRE 2864 432 2816 432
WIRE 2976 432 2944 432
WIRE 3024 432 2976 432
WIRE 80 448 80 384
WIRE 96 448 80 448
WIRE 192 448 160 448
WIRE 224 448 192 448
WIRE 304 448 304 384
WIRE 304 448 288 448
WIRE 1200 448 1200 416
WIRE 1984 448 1984 432
WIRE 2080 448 2080 352
WIRE 2080 448 1984 448
WIRE 2160 448 2160 400
WIRE 2816 448 2816 432
WIRE 2976 448 2976 432
WIRE -48 512 -48 464
WIRE 192 512 192 448
WIRE 192 512 -48 512
WIRE 368 512 368 496
WIRE 448 512 448 496
WIRE 672 512 672 432
WIRE 784 512 784 432
WIRE 1600 528 1568 528
WIRE 1696 528 1696 320
WIRE 1696 528 1680 528
WIRE 1824 528 1824 464
WIRE 1824 528 1696 528
WIRE 2016 528 1824 528
WIRE 2160 528 2160 448
WIRE 2160 528 2096 528
WIRE 2176 528 2160 528
WIRE 2816 528 2816 512
WIRE 2976 528 2976 512
WIRE 1200 544 1200 528
WIRE 2016 672 2000 672
WIRE 2176 672 2112 672
WIRE 2288 672 2176 672
WIRE 2368 672 2288 672
WIRE 912 688 848 688
WIRE 2176 688 2176 672
WIRE 2288 688 2288 672
WIRE 160 704 80 704
WIRE 304 704 160 704
WIRE 464 704 384 704
WIRE 1776 720 1760 720
WIRE 912 736 912 688
WIRE 160 752 160 704
WIRE 464 752 464 704
WIRE 1760 752 1760 720
WIRE 3280 752 3216 752
WIRE 2512 768 2288 768
WIRE 1376 784 1344 784
WIRE 2512 784 2512 768
WIRE 3216 784 3216 752
WIRE 3216 784 3152 784
WIRE 1504 800 1440 800
WIRE 1552 800 1504 800
WIRE 1696 800 1616 800
WIRE 2000 800 2000 672
WIRE 304 816 304 704
WIRE 1376 816 1344 816
WIRE 2288 816 2288 768
WIRE 2320 816 2288 816
WIRE 2704 816 2608 816
WIRE 912 832 912 816
WIRE 1008 832 912 832
WIRE 2448 832 2384 832
WIRE 2848 832 2768 832
WIRE 2896 832 2848 832
WIRE 3152 832 3152 784
WIRE 3216 832 3216 784
WIRE 464 848 464 832
WIRE 560 848 464 848
WIRE 2112 848 2112 672
WIRE 2112 848 2064 848
WIRE 2176 848 2176 768
WIRE 2192 848 2176 848
WIRE 2320 848 2272 848
WIRE 2704 848 2656 848
WIRE 160 864 160 832
WIRE 160 864 80 864
WIRE 240 864 160 864
WIRE 912 864 912 832
WIRE 2848 864 2848 832
WIRE 160 880 160 864
WIRE 464 880 464 848
WIRE 1760 880 1760 848
WIRE 80 896 80 864
WIRE 1504 896 1504 800
WIRE 2176 896 2176 848
WIRE 2512 896 2512 880
WIRE 2608 896 2608 816
WIRE 2608 896 2512 896
WIRE 384 912 384 704
WIRE 384 912 304 912
WIRE 2512 912 2512 896
WIRE 912 960 912 944
WIRE 80 976 80 960
WIRE 160 976 160 944
WIRE 464 976 464 960
WIRE 3152 976 3152 896
WIRE 3216 976 3216 912
WIRE 2656 992 2656 848
WIRE 2848 992 2848 944
WIRE 2848 992 2656 992
WIRE 2896 992 2848 992
WIRE 3008 992 2976 992
WIRE 1344 1008 1344 816
WIRE 1504 1008 1504 960
WIRE 1504 1008 1344 1008
WIRE 1616 1008 1504 1008
WIRE 2000 1008 2000 896
WIRE 2176 1008 2176 976
WIRE 2176 1008 2000 1008
WIRE 2192 1008 2176 1008
WIRE 2512 1008 2512 992
FLAG 48 400 0
FLAG 368 512 0
FLAG 528 384 Vcc
FLAG 672 512 0
FLAG 784 512 0
FLAG 448 512 0
FLAG 800 288 Vsteady
FLAG 1760 336 Vsteady
FLAG 1760 272 0
FLAG 1568 528 0
FLAG 1968 224 base
FLAG 2176 224 Vcc
FLAG 2064 224 Vsteady
FLAG 1664 288 Vreg_in
FLAG 160 976 0
FLAG 80 976 0
FLAG 80 704 Vsteady
FLAG 464 976 0
FLAG 560 848 V_5
FLAG 1200 544 0
FLAG 1136 272 V_5
FLAG 1296 416 Vreg_in
FLAG 1408 768 Vsteady
FLAG 1408 832 0
FLAG 1760 880 0
FLAG 1776 720 base
FLAG 912 960 0
FLAG 848 688 V_5
FLAG 1344 784 Creg_in
FLAG 1008 832 Creg_in
FLAG 1616 1008 Cmeas
FLAG 2176 528 Ve
FLAG 2352 864 Vsteady
FLAG 2352 800 0
FLAG 2368 672 Ve
FLAG 2512 1008 0
FLAG 2192 1008 Vout
FLAG 2016 672 base
FLAG 2736 864 Vsteady
FLAG 2736 800 0
FLAG 3008 992 0
FLAG 2896 832 Cmeas
FLAG 2384 432 Cmeas
FLAG 2384 256 Vmeas
FLAG 1664 320 Vmeas
FLAG 2976 352 0
FLAG 2816 352 0
FLAG 3024 256 Vreg_in
FLAG 2976 528 0
FLAG 2816 528 0
FLAG 3024 432 Creg_in
FLAG 3280 752 Vout
FLAG 3152 976 0
FLAG 3216 976 0
SYMBOL voltage -48 368 R0
SYMATTR InstName V1
SYMBOL diode 96 352 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMBOL diode 224 352 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMBOL diode 224 464 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMBOL diode 96 464 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D4
SYMBOL cap 352 432 R0
SYMATTR InstName C1
SYMATTR Value 10mF
SYMATTR SpiceLine Rser=0.1
SYMBOL cap 656 368 R0
SYMATTR InstName C2
SYMATTR Value 10mF
SYMATTR SpiceLine Rser=0.1
SYMBOL cap 768 368 R0
SYMATTR InstName C3
SYMATTR Value 10mF
SYMATTR SpiceLine Rser=0.1
SYMBOL cap 432 432 R0
SYMATTR InstName C4
SYMATTR Value 10mF
SYMATTR SpiceLine Rser=0.1
SYMBOL diode 416 304 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D5
SYMBOL npn 2096 304 R0
SYMATTR InstName Q1
SYMATTR Value 2N3055
SYMBOL npn 1984 256 R0
SYMATTR InstName Q2
SYMATTR Value 2N2222
SYMBOL res 1952 288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL Opamps\\opamp2 1760 368 M180
SYMATTR InstName U1
SYMATTR Value LM358
SYMBOL res 2000 448 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value 8.2k
SYMBOL res 2176 432 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res 2112 512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 22k
SYMBOL cap 1808 400 R0
SYMATTR InstName C5
SYMATTR Value 220µF
SYMBOL res 1696 512 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 5.1k
SYMBOL zener 176 944 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D6
SYMATTR Value 6.2V
SYMBOL res 144 736 R0
SYMATTR InstName R6
SYMATTR Value 5.1k
SYMBOL cap 96 960 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C6
SYMATTR Value 10µF
SYMBOL npn 240 816 R0
SYMATTR InstName Q3
SYMATTR Value 2N2222
SYMBOL res 448 864 R0
SYMATTR InstName R7
SYMATTR Value 8k
SYMBOL res 448 736 R0
SYMATTR InstName R8
SYMATTR Value 2k
SYMBOL res 1184 432 R0
SYMATTR InstName R9
SYMATTR Value 5k
SYMBOL res 1184 304 R0
SYMATTR InstName R10
SYMATTR Value 5k
SYMBOL Opamps\\opamp2 1408 736 R0
SYMATTR InstName U2
SYMATTR Value LM358
SYMBOL zener 1616 784 R90
WINDOW 0 -4 32 VBottom 2
WINDOW 3 36 32 VTop 2
SYMATTR InstName D7
SYMATTR Value 3.6V
SYMBOL res 896 848 R0
SYMATTR InstName R11
SYMATTR Value 5k
SYMBOL res 896 720 R0
SYMATTR InstName R12
SYMATTR Value 5k
SYMBOL cap 1488 896 R0
SYMATTR InstName C7
SYMATTR Value 220µF
SYMBOL res 2160 672 R0
SYMATTR InstName R13
SYMATTR Value 0.1
SYMBOL Opamps\\opamp2 2352 896 M180
SYMATTR InstName U3
SYMATTR Value LM358
SYMBOL res 2272 672 R0
SYMATTR InstName R14
SYMATTR Value 100
SYMBOL res 2288 832 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 100
SYMBOL npn 1696 752 R0
SYMATTR InstName Q4
SYMATTR Value 2N2222
SYMBOL npn 2448 784 R0
SYMATTR InstName Q5
SYMATTR Value 2N2222
SYMBOL res 2160 880 R0
SYMATTR InstName R16
SYMATTR Value 0.1
SYMBOL res 2496 896 R0
SYMATTR InstName R17
SYMATTR Value 100
SYMBOL npn 2064 800 M0
WINDOW 3 40 60 Left 2
SYMATTR InstName Q6
SYMATTR Value 2N2222
SYMBOL Opamps\\opamp2 2736 896 M180
SYMATTR InstName U4
SYMATTR Value LM358
SYMBOL res 2992 976 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 1k
SYMBOL res 2864 960 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R19
SYMATTR Value 39k
SYMBOL res 2512 416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 10k
SYMBOL res 2512 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 10k
SYMBOL res 2800 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R22
SYMATTR Value 10k
SYMBOL cap 2800 272 R0
SYMATTR InstName C8
SYMATTR Value 100n
SYMBOL res 2960 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 100k
SYMBOL cap 2960 272 R0
SYMATTR InstName C9
SYMATTR Value 10n
SYMBOL res 2800 416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R24
SYMATTR Value 10k
SYMBOL cap 2800 448 R0
SYMATTR InstName C10
SYMATTR Value 100n
SYMBOL res 2960 416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R25
SYMATTR Value 100k
SYMBOL cap 2960 448 R0
SYMATTR InstName C11
SYMATTR Value 10n
SYMBOL res 3200 816 R0
SYMATTR InstName R26
SYMATTR Value 5.1k
SYMBOL cap 3136 832 R0
SYMATTR InstName C12
SYMATTR Value 10µF
TEXT -120 152 Left 2 !.inc C:\\GIT\\digital-power-supply\\schematic\\LM358.101
TEXT 528 896 Left 2 ;trimpot
TEXT 992 912 Left 2 ;adj pot
TEXT 1272 496 Left 2 ;adj pot
TEXT 1496 680 Left 2 ;current comparitor
TEXT 2584 688 Left 2 ;current measurement
TEXT 1752 560 Left 2 ;voltage regulator
TEXT 560 240 Left 2 ;power source
TEXT 1056 -64 Left 5 ;Digital power supply\n18361137\nDaniel Robinson\n19-Oct-2016
TEXT 2568 336 Left 2 ;Arduino
RECTANGLE Normal 928 592 -112 208 2
RECTANGLE Normal 672 1056 -112 640 2
RECTANGLE Normal 1856 1056 1216 640 2
RECTANGLE Normal 1136 1056 752 640 2
RECTANGLE Normal 1424 592 1008 208 2
RECTANGLE Normal 2256 592 1504 208 2
RECTANGLE Normal 3056 1056 1936 640 2
RECTANGLE Normal 3120 592 2304 208 2
RECTANGLE Normal 3360 1056 3104 640 2
RECTANGLE Normal 2688 432 2528 256 2
