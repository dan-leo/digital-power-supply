Version 4
SHEET 1 3364 1976
WIRE 1168 272 1104 272
WIRE 192 288 -48 288
WIRE 416 288 192 288
WIRE 672 288 480 288
WIRE 784 288 672 288
WIRE 800 288 784 288
WIRE 1168 320 1168 272
WIRE 96 336 80 336
WIRE 192 336 192 288
WIRE 192 336 160 336
WIRE 224 336 192 336
WIRE 304 336 288 336
WIRE 672 368 672 288
WIRE 784 368 784 288
WIRE -48 384 -48 288
WIRE 80 384 80 336
WIRE 80 384 48 384
WIRE 304 384 304 336
WIRE 368 384 304 384
WIRE 448 384 368 384
WIRE 528 384 448 384
WIRE 48 400 48 384
WIRE 1168 416 1168 400
WIRE 1264 416 1168 416
WIRE 368 432 368 384
WIRE 448 432 448 384
WIRE 80 448 80 384
WIRE 96 448 80 448
WIRE 192 448 160 448
WIRE 224 448 192 448
WIRE 304 448 304 384
WIRE 304 448 288 448
WIRE 1168 448 1168 416
WIRE -48 512 -48 464
WIRE 192 512 192 448
WIRE 192 512 -48 512
WIRE 368 512 368 496
WIRE 448 512 448 496
WIRE 672 512 672 432
WIRE 784 512 784 432
WIRE 1168 544 1168 528
WIRE 880 688 816 688
WIRE 160 704 80 704
WIRE 304 704 160 704
WIRE 464 704 384 704
WIRE 880 736 880 688
WIRE 160 752 160 704
WIRE 464 752 464 704
WIRE 1312 752 1248 752
WIRE 1248 784 1248 752
WIRE 1248 784 1184 784
WIRE 1312 800 1312 752
WIRE 1344 800 1312 800
WIRE 304 816 304 704
WIRE 880 832 880 816
WIRE 880 832 784 832
WIRE 976 832 880 832
WIRE 1184 832 1184 784
WIRE 1248 832 1248 784
WIRE 464 848 464 832
WIRE 464 848 416 848
WIRE 560 848 464 848
WIRE 1344 848 1344 800
WIRE 160 864 160 832
WIRE 160 864 80 864
WIRE 240 864 160 864
WIRE 784 864 784 832
WIRE 880 864 880 832
WIRE 160 880 160 864
WIRE 416 880 416 848
WIRE 464 880 464 848
WIRE 80 896 80 864
WIRE 384 912 384 704
WIRE 384 912 304 912
WIRE 784 960 784 928
WIRE 880 960 880 944
WIRE 80 976 80 960
WIRE 160 976 160 944
WIRE 416 976 416 944
WIRE 464 976 464 960
WIRE 1184 976 1184 896
WIRE 1248 976 1248 912
WIRE 1344 976 1344 928
WIRE 1344 976 1312 976
WIRE 1312 1024 1312 976
WIRE 1312 1024 1280 1024
WIRE 368 1120 352 1120
WIRE 448 1120 432 1120
WIRE 560 1120 544 1120
WIRE 432 1152 432 1120
WIRE 1312 1168 1296 1168
WIRE 112 1184 48 1184
WIRE 208 1200 176 1200
WIRE 240 1200 208 1200
WIRE 368 1200 368 1120
WIRE 368 1200 320 1200
WIRE 544 1200 544 1120
WIRE 1296 1200 1296 1168
WIRE 80 1216 48 1216
WIRE 112 1216 80 1216
WIRE 896 1232 880 1232
WIRE 912 1232 896 1232
WIRE 368 1248 368 1200
WIRE 464 1248 432 1248
WIRE 480 1248 464 1248
WIRE 896 1248 896 1232
WIRE 896 1248 832 1248
WIRE 1040 1248 976 1248
WIRE 1088 1248 1040 1248
WIRE 1232 1248 1152 1248
WIRE 912 1264 880 1264
WIRE 208 1296 208 1200
WIRE 1296 1328 1296 1296
WIRE 368 1344 368 1328
WIRE 464 1344 464 1248
WIRE 464 1344 368 1344
WIRE 544 1344 544 1296
WIRE 1040 1344 1040 1248
WIRE 1312 1376 1296 1376
WIRE 832 1408 832 1248
WIRE 1040 1408 832 1408
WIRE 1296 1408 1296 1376
WIRE -16 1424 -48 1424
WIRE 80 1424 80 1216
WIRE 80 1424 64 1424
WIRE 208 1424 208 1360
WIRE 208 1424 80 1424
WIRE 400 1424 208 1424
WIRE 544 1424 544 1344
WIRE 544 1424 480 1424
WIRE 560 1424 544 1424
WIRE 880 1456 880 1264
WIRE 1152 1456 880 1456
WIRE -48 1616 -80 1616
WIRE 64 1616 32 1616
WIRE 240 1616 224 1616
WIRE 352 1616 320 1616
WIRE 400 1616 352 1616
WIRE 512 1616 480 1616
WIRE 560 1616 512 1616
WIRE 352 1632 352 1616
WIRE 512 1632 512 1616
WIRE 352 1712 352 1696
WIRE 512 1712 512 1696
WIRE 848 1712 832 1712
WIRE 1040 1712 848 1712
WIRE 1184 1728 1104 1728
WIRE 1232 1728 1184 1728
WIRE 848 1744 848 1712
WIRE 1040 1744 992 1744
WIRE 1184 1760 1184 1728
WIRE -48 1792 -80 1792
WIRE 64 1792 32 1792
WIRE 240 1792 224 1792
WIRE 352 1792 320 1792
WIRE 400 1792 352 1792
WIRE 512 1792 480 1792
WIRE 560 1792 512 1792
WIRE 352 1808 352 1792
WIRE 512 1808 512 1792
WIRE 352 1888 352 1872
WIRE 512 1888 512 1872
WIRE 848 1888 848 1824
WIRE 848 1888 832 1888
WIRE 992 1888 992 1744
WIRE 1184 1888 1184 1840
WIRE 1184 1888 992 1888
WIRE 1232 1888 1184 1888
WIRE 1344 1888 1312 1888
FLAG 48 400 0
FLAG 368 512 0
FLAG 528 384 Vcc
FLAG 672 512 0
FLAG 784 512 0
FLAG 448 512 0
FLAG 800 288 Vsteady
FLAG 144 1232 Vsteady
FLAG 144 1168 0
FLAG -48 1424 0
FLAG 352 1120 base
FLAG 560 1120 Vcc
FLAG 448 1120 Vsteady
FLAG 48 1184 Vreg_in
FLAG 160 976 0
FLAG 80 976 0
FLAG 80 704 Vsteady
FLAG 464 976 0
FLAG 560 848 V_5
FLAG 1168 544 0
FLAG 1104 272 V_5
FLAG 1264 416 Vreg_in
FLAG 944 1216 Vsteady
FLAG 944 1280 0
FLAG 1296 1328 0
FLAG 1312 1168 base
FLAG 880 960 0
FLAG 816 688 V_5
FLAG 880 1232 Creg_in
FLAG 976 832 Creg_in
FLAG 1152 1456 Cmeas
FLAG 1072 1760 Vsteady
FLAG 1072 1696 0
FLAG 1344 1888 0
FLAG 1232 1728 Cmeas
FLAG -80 1792 Cmeas
FLAG -80 1616 Vmeas
FLAG 48 1216 Vmeas
FLAG 512 1712 0
FLAG 352 1712 0
FLAG 560 1616 Vreg_in
FLAG 512 1888 0
FLAG 352 1888 0
FLAG 560 1792 Creg_in
FLAG 1312 752 Vout
FLAG 1184 976 0
FLAG 1248 976 0
FLAG 832 1888 0
FLAG 560 1424 Vout
FLAG 832 1712 Vout_GND
FLAG 1280 1024 Vout_GND
FLAG 1312 1376 base
FLAG 1296 1472 0
FLAG 416 976 0
FLAG 784 960 0
SYMBOL voltage -48 368 R0
WINDOW 3 6 124 Left 2
WINDOW 123 0 0 Left 2
WINDOW 39 2 166 Left 2
SYMATTR Value SINE(0 25.6 50)
SYMATTR SpiceLine Rser=2.86
SYMATTR InstName V1
SYMBOL diode 96 352 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMBOL diode 224 352 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMBOL diode 224 464 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMBOL diode 96 464 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D4
SYMBOL cap 352 432 R0
SYMATTR InstName C1
SYMATTR Value 10mF
SYMATTR SpiceLine Rser=0.1
SYMBOL cap 656 368 R0
SYMATTR InstName C2
SYMATTR Value 10mF
SYMATTR SpiceLine Rser=0.1
SYMBOL cap 768 368 R0
SYMATTR InstName C3
SYMATTR Value 10mF
SYMATTR SpiceLine Rser=0.1
SYMBOL cap 432 432 R0
SYMATTR InstName C4
SYMATTR Value 10mF
SYMATTR SpiceLine Rser=0.1
SYMBOL diode 416 304 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D5
SYMBOL npn 480 1200 R0
SYMATTR InstName Q1
SYMATTR Value 2N3055
SYMBOL npn 368 1152 R0
SYMATTR InstName Q2
SYMATTR Value 2N2222
SYMBOL res 336 1184 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL Opamps\\opamp2 144 1264 M180
SYMATTR InstName U1
SYMATTR Value LM358
SYMBOL res 384 1344 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R2
SYMATTR Value 8.2k
SYMBOL res 560 1328 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res 496 1408 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL cap 192 1296 R0
SYMATTR InstName C5
SYMATTR Value 220µF
SYMBOL res 80 1408 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 5.1k
SYMBOL zener 176 944 R180
WINDOW 0 24 64 Left 2
WINDOW 3 -134 -5 Left 2
SYMATTR InstName D6
SYMATTR Value BZX84C6V2L
SYMBOL res 144 736 R0
SYMATTR InstName R6
SYMATTR Value 5.1k
SYMBOL cap 96 960 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C6
SYMATTR Value 10µF
SYMBOL npn 240 816 R0
SYMATTR InstName Q3
SYMATTR Value 2N2222
SYMBOL res 448 864 R0
SYMATTR InstName R7
SYMATTR Value 9.6k
SYMBOL res 448 736 R0
SYMATTR InstName R8
SYMATTR Value 400
SYMBOL res 1152 432 R0
SYMATTR InstName R9
SYMATTR Value 8k
SYMBOL res 1152 304 R0
SYMATTR InstName R10
SYMATTR Value 2k
SYMBOL Opamps\\opamp2 944 1184 R0
SYMATTR InstName U2
SYMATTR Value LM358
SYMBOL zener 1152 1232 R90
WINDOW 0 -4 32 VBottom 2
WINDOW 3 36 32 VTop 2
SYMATTR InstName D7
SYMATTR Value 1N747
SYMBOL res 864 848 R0
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL res 864 720 R0
SYMATTR InstName R12
SYMATTR Value 9k
SYMBOL cap 1024 1344 R0
SYMATTR InstName C7
SYMATTR Value 220µF
SYMATTR SpiceLine Rser=0.1
SYMBOL res 832 1728 R0
SYMATTR InstName R13
SYMATTR Value 0.1
SYMBOL npn 1232 1200 R0
SYMATTR InstName Q4
SYMATTR Value 2N2222
SYMBOL Opamps\\opamp2 1072 1792 M180
SYMATTR InstName U4
SYMATTR Value LM358
SYMBOL res 1328 1872 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 1k
SYMBOL res 1200 1856 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R19
SYMATTR Value 39k
SYMBOL res 48 1776 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R20
SYMATTR Value 10k
SYMBOL res 48 1600 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R21
SYMATTR Value 10k
SYMBOL res 336 1600 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R22
SYMATTR Value 10k
SYMBOL cap 336 1632 R0
SYMATTR InstName C8
SYMATTR Value 100n
SYMBOL res 496 1600 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R23
SYMATTR Value 100k
SYMBOL cap 496 1632 R0
SYMATTR InstName C9
SYMATTR Value 10n
SYMBOL res 336 1776 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R24
SYMATTR Value 10k
SYMBOL cap 336 1808 R0
SYMATTR InstName C10
SYMATTR Value 100n
SYMBOL res 496 1776 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R25
SYMATTR Value 100k
SYMBOL cap 496 1808 R0
SYMATTR InstName C11
SYMATTR Value 10n
SYMBOL res 1232 816 R0
SYMATTR InstName R26
SYMATTR Value 5.1k
SYMBOL cap 1168 832 R0
SYMATTR InstName C12
SYMATTR Value 10µF
SYMBOL res 1328 832 R0
SYMATTR InstName R_load
SYMATTR Value 12
SYMBOL cap 1280 1408 R0
SYMATTR InstName C13
SYMATTR Value 220µF
SYMATTR SpiceLine Rser=0.1
SYMBOL cap 400 880 R0
SYMATTR InstName C14
SYMATTR Value 10µF
SYMBOL cap 768 864 R0
SYMATTR InstName C15
SYMATTR Value 220µF
TEXT -120 152 Left 2 !.inc C:\\GIT\\digital-power-supply\\schematic\\LM358.101
TEXT 528 896 Left 2 ;trimpot
TEXT 960 912 Left 2 ;current\nadj pot
TEXT 1240 496 Left 2 ;voltage\nadj pot
TEXT 1032 1128 Left 2 ;current comparitor
TEXT 920 1584 Left 2 ;current measurement
TEXT 136 1456 Left 2 ;voltage regulator
TEXT 560 240 Left 2 ;power source
TEXT 1056 -64 Left 5 ;Digital power supply\n18361137\nDaniel Robinson\n19-Oct-2016
TEXT 104 1696 Left 2 ;Arduino
TEXT 184 672 Left 2 ;zener reference
TEXT -120 184 Left 2 !.tran 10
TEXT 1136 1232 Left 2 ;3.6V
TEXT 184 912 Left 2 ;6.2V
TEXT -8 264 Left 2 !.ic V(N001)=24.5
RECTANGLE Normal 928 592 -112 208 2
RECTANGLE Normal 672 1056 -112 640 2
RECTANGLE Normal 1392 1504 752 1088 2
RECTANGLE Normal 1104 1056 720 640 2
RECTANGLE Normal 1392 592 976 208 2
RECTANGLE Normal 640 1488 -112 1104 2
RECTANGLE Normal 656 1952 -160 1568 2
RECTANGLE Normal 1392 1056 1136 640 4
RECTANGLE Normal 224 1792 64 1616 2
RECTANGLE Normal 688 1952 1392 1536 2
